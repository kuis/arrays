<md-content layout-padding ng-if="dataset.uid">
    <form name="dataForm" ng-submit="submitForm(!dataForm.$invalid && dataForm.$dirty)">
        <md-input-container class="md-block" flex-gt-sm>
            <label>Primary Key</label>
            <md-select required name="fn_new_rowPrimaryKeyFromRowObject" ng-model="dataset.fn_new_rowPrimaryKeyFromRowObject">
                <md-option ng-repeat="columnName in dataset.colNames" value="{{columnName}}">
                    {{columnName}}
                </md-option>
            </md-select>
            <div ng-messages="dataForm.fn_new_rowPrimaryKeyFromRowObject.$error">
                <div ng-message="required">This is required.</div>
            </div>
        </md-input-container>

        <table class="table data">
            <thead>
            <tr>
                <th>#</th>
                <th>Exclude</th>
                <th>Column Name</th>
                <th>Type</th>
                <th>Sample</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="colName in dataset.colNames" ng-click="openFieldDialog($event, colName, dataset.firstRecord[$index])">
                <td>{{ finalizedColName=(colName|dotless);$index+1 }}</td>
                <td><md-checkbox ng-model="dataset.fe_excludeFields[finalizedColName]" aria-label="Exclude {{colName}}"></td>
                <td>{{ finalizedColName }}</td>
                <td>{{ dataset.raw_rowObjects_coercionScheme[finalizedColName] | typeCoercionToString }}</td>
                <td>{{ dataset.firstRecord[$index] }}</td>
            </tr>
            </tbody>
        </table>

        <div layout="row" layout-align="end center" class="panel-footer">
            <md-button class="md-raised" ng-click="reset()" ng-disabled="!dataForm.$dirty">
                <i class="glyphicon glyphicon-refresh"></i> Reset
            </md-button>
            <md-button class="md-raised" type="submit" ng-disabled="dataForm.$invalid || !dataForm.$dirty">
                <i class="glyphicon glyphicon-ok"></i> Save
            </md-button>
        </div>
    </form>
</md-content>

<ng-include src="'/templates/blocks/dataset.empty.html'" ng-if="!dataset.uid"></ng-include>