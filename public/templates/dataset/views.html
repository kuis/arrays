<md-content layout-padding ng-if="dataset.uid">
    <form name="vm.viewsForm" ng-submit="submitForm(!vm.viewsForm.$invalid)">
        <md-input-container class="md-block" flex-gt-sm>
            <label>Default View</label>
            <md-select ng-required="dataset.fe_visible&&dataset.fe_listed" name="default"
                       ng-model="data.default_view">
                <md-option ng-repeat="view in views" value="{{view.name}}">
                    {{view.displayAs}}
                </md-option>
            </md-select>
            <div ng-messages="vm.viewsForm.default.$error">
                <div ng-message="required">This is required.</div>
            </div>
        </md-input-container>

        <div class="table-container">
            <table class="table data">
                <thead>
                <tr>
                    <th>Visibility</th>
                    <th>View Name</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="view in views">
                    <td>
                        <md-checkbox ng-model="dataset.fe_views.views[view.name].visible"
                                     aria-label="Exclude {{view.name}}" md-no-ink></md-checkbox>
                    </td>
                    <td ng-click="openViewDialog($event, view._id)" class="view-name" ng-class="{default_view: data.default_view === view.name}" >
                        <span class="{{ view.icon }}"></span>
                        {{ view.displayAs}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div layout="row" layout-align="end center">
            <md-button class="md-dashboard confirm" type="submit" ng-disabled="vm.viewsForm.$invalid">
                <span class="btn-label">Next</span>
            </md-button>
        </div>
    </form>
</md-content>

<ng-include src="'/templates/blocks/dataset.empty.html'" ng-if="!dataset.uid"></ng-include>
