<md-content layout-padding>
    <div>

        <h2>Select Your Data Source</h2>

        <div ng-hide="dataset.uid">
            <label>Upload spreadsheet</label>
            <p>Select any .csv (comma-separated) or .tsv (tab-separated) file.</p>
            <input type="file" id="datafile" nv-file-select="" uploader="uploader" accept=".csv, .tsv, .tsv|text/csv,text/csv-schema,text/tsv" class="team-uploader" ng-disabled="uploader.queue.length > 0" />

            <label for="datafile" class="md-button md-dashboard primary-action" ng-disabled="uploader.queue.length > 0">
                {{ dataset.uid ? 'Replace File' : 'Choose File' }}
            </label>
        </div>

        <p class="instructions" ng-if="dataset.uid">Dataset(s)</p>

        <ul class="dashboard-list user-list" ng-cloak>
            <li ng-if="dataset.uid" layout="row" layout-align="space-between center">

                <span flex="50">
                    <span class="dashboard-list-name">Main data source</span>
                </span>

                <span class="dashboard-list-icon warn" aria-hidden="true" aria-label="Remove" flex="5">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                </span>

            </li>
        </ul>

        <ul class="dashboard-list user-list" ng-cloak>
            <li ng-repeat="item in uploader.queue track by $index" ng-if="!item.isSuccess" layout="row" layout-align="none center">

                <span ng-class="{'pending': item.isUploading }" flex="50">
                    <span class="dashboard-list-name">{{ item.file.name }}</span>
                </span>

                <div ng-show="uploader.isHTML5" ng-hide="item.isSuccess" class="progress-container" draggable="" flex="40">
                    <md-progress-linear md-mode="{{progressMode}}" value="{{item.progress}}"></md-progress-linear>
                </div>

                <div flex="5"></div>

                <span class="dashboard-list-icon warn" ng-click="item.cancel()" ng-hide="!item.isUploading" aria-hidden="true" aria-label="Cancel Upload" flex="5">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                </span>
                <span class="dashboard-list-icon warn" ng-click="item.remove()" ng-hide="item.isUploading" aria-hidden="true" aria-label="Delete" flex="5">
                    <i class="fa fa-remove" aria-hidden="true"></i>
                </span>

            </li>
        </ul>

        <md-button class="md-dashboard confirm" style="margin-top: 30px" ng-click="uploader.uploadAll()"
            ng-if="uploader.queue.length > 0 && !dataset.uid"
            ng-disabled="uploader.isUploading">
            <span class="btn-label">Import Data</span>
        </md-button>

        <div ng-if="dataset.uid && addingAdditionalDatasource" ng-repeat="additionalDatasource in additionalDatasources" style="margin-top: 15px">
            <label>Upload spreadsheet</label>
            <p>Select any .csv (comma-separated) or .tsv (tab-separated) file.</p>
            <input type="file" id="adddatafile" nv-file-select="" uploader="additionalDatasource.uploader" accept=".csv, .tsv, .tsv|text/csv,text/csv-schema,text/tsv" class="team-uploader" />

            <label for="adddatafile" class="md-button md-dashboard primary-action">
                Choose File
            </label>

            <!-- TODO show already-uploaded sources here -->
            <ul class="dashboard-list user-list" ng-cloak>
                <li ng-repeat="item in additionalDatasource.uploader.queue track by $index" layout="row" layout-align="space-between center">

                    <span ng-class="{'pending': item.isUploading }" flex="50">
                        <span class="dashboard-list-name">{{ item.file.name }}</span>
                    </span>

                    <div ng-show="uploader.isHTML5" ng-hide="item.isSuccess" class="progress-container" draggable="" flex="40">
                        <md-progress-linear md-mode="{{progressMode}}" value="{{item.progress}}"></md-progress-linear>
                    </div>

                    <md-button class="md-dashboard confirm" ng-click="item.upload()" ng-if="!item.isSuccess"
                               ng-disabled="item.isReady || item.isUploading">
                        <span class="btn-label">Upload</span>
                    </md-button>

                    <div flex="5"></div>

                    <span class="dashboard-list-icon warn" ng-click="item.cancel()" ng-hide="!item.isUploading" aria-hidden="true" aria-label="Cancel Upload" flex="5">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                    </span>
                    <span class="dashboard-list-icon warn" ng-click="item.remove()" ng-hide="item.isUploading" aria-hidden="true" aria-label="Delete" flex="5">
                        <i class="fa fa-remove" aria-hidden="true"></i>
                    </span>

                </li>
            </ul>

        </div>

        <div ng-if="dataset.uid && !addingAdditionalDatasource">
            <md-input-container>
                <md-button class="md-dashboard" ng-click="addNewDatasource()">
                    <span class="btn-label">Combine With Another Datasource</span></md-button>
            </md-input-container>

            <p>
                <a href="" class="warn">Clear All</a>
            </p>

            <!-- Important: Clearing all your data sources will delete any data currently stored in your dataset.
            Are you sure you want to clear all data sources?
            CLEAR ALL
            CANCEL -->

        </div>
    </div>

    <!-- <div>
        <md-toolbar layout="row">
            <div class="md-toolbar-tools">Banner</div>
        </md-toolbar>

        <div flex="50">
            <img class="img-responsive" ng-if="dataset.banner" ng-src="{{dataset.banner}}">
        </div>

        <label>Choose image</label>
        <input type="file" nv-file-select="" uploader="imageUploader">

        <table class="table upload">
            <thead>
            <tr>
                <th width="50%">Image Name</th>
                <th ng-show="imageUploader.isHTML5">Size</th>
                <th ng-show="imageUploader.isHTML5">Progress</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>

            <tr ng-if="imageUploader.queue[0]">
                <td><strong>{{ imageUploader.queue[0].file.name }}</strong></td>
                <td ng-show="imageUploader.isHTML5" nowrap>{{ imageUploader.queue[0].file.size/1024/1024|number:2 }}
                    MB
                </td>
                <td ng-show="imageUploader.isHTML5" class="progress-container">
                    <md-progress-linear md-mode="determinate"
                                        value="{{imageUploader.queue[0].progress}}"></md-progress-linear>
                </td>


                <td class="text-center">
                    <span ng-show="imageUploader.queue[0].isSuccess" class="text-success"><i
                            class="glyphicon glyphicon-ok"></i></span>
                    <span ng-show="imageUploader.queue[0].isCancel" class="text-warning"><i
                            class="glyphicon glyphicon-ban-circle"></i></span>
                    <span ng-show="imageUploader.queue[0].isError" class="text-danger"><i
                            class="glyphicon glyphicon-remove"></i></span>
                </td>
                <td nowrap class="no-padding-vertical">

                    <md-button class="md-raised" ng-click="imageUploader.queue[0].upload()"
                               ng-disabled="imageUploader.queue[0].isReady || imageUploader.queue[0].isUploading || imageUploader.queue[0].isSuccess">
                        Upload
                    </md-button>
                    <md-button class="md-raised" ng-click="imageUploader.queue[0].cancel()"
                               ng-disabled="!imageUploader.queue[0].isUploading">
                        Cancel
                    </md-button>
                    <md-button class="md-raised" ng-click="imageUploader.queue[0].remove()">
                        Remove
                    </md-button>
                </td>
            </tr>
            </tbody>
        </table>
    </div> -->
    <!-- if init wizard -->
    <!-- <div layout="row" layout-align="space-between center">
        <md-button class="md-dashboard" ng-click="navigate('dashboard.dataset.settings')" target="_self" md-no-ink>
            <span class="btn-label">Back</span>
        </md-button>
        <md-button class="md-dashboard confirm" ng-click="navigate('dashboard.dataset.data')" ng-disabled="!dataset.uid" md-no-ink>
            <span class="btn-label">Next</span>
        </md-button>
    </div> -->
</md-content>

<!-- <ng-include src="'/templates/blocks/dataset.empty.html'" ng-if="!dataset.title"></ng-include> -->
