{% set currentView = ['dataset', 'source'] %}

{% extends "../../layout/admin.html" %}

{% block headSuffix %}
	<title>Admin - Arrays</title>
{% endblock %}

{% block content %}
	<header class="admin-header">
		<h1 class="admin-title">{{doc.title}} - Upload </h1>
	</header>

	{% if flash | length %}
	<div class="alert alert-success" role="alert">{{ flash }}</div>
	{% elif error | length %}
	<div class="alert alert-danger" role="alert">{{ error }}</div>

	{% endif %}


	<div class="dataset">

		{% include "../../partials/admin/dataset-breadcrumb.html" %}

		<br />

		<input type="hidden" id="datasource_count" value="{{ sub_datasources | length }}"/>

		<form class="upload" enctype="multipart/form-data" method="post">
			{% for datasource in sub_datasources %}

				<div class="form-group">
					<div class="row">
						<div class="col-xs-11">
							<h4>Datasource {{ loop.index }}</h4>
						</div>
						<div class="col-xs-1">
							<a class="removeDatasource"><span class="glyphicon glyphicon-remove"></span></a>
						</div>
					</div>

					<div class="row">
						<div class="col-xs-5">
							<label for="file_{{loop.index0}}">Select a CSV/TSV file To Upload</label>
						</div>
						<div class="col-xs-6">
							<input type="file" id="file_{{loop.index0}}" name="files[]" accept=".csv,.tsv|text/csv,text/csv-schema,text/tsv"/>
						</div>
					</div>

				</div>

			{% endfor %}

			<div class="form-group row"><a id="add_datasource" class="add" ><span class="glyphicon glyphicon-plus"></span> Add more</a></div>


			<div class="panel-footer">
				<a class="btn btn-default pull-left" href="settings"><span class="glyphicon glyphicon-hand-left"></span> Back</a>
				<button type="submit" class="btn btn-default pull-right"><span class="glyphicon glyphicon-hand-right"></span> Upload</button>
				<div class="clearfix"></div>
			</div>
	</form>

	</div>

{% endblock %}

{% block inlineScript %}
	{{ super() }}

	<script type="text/javascript" src="/javascripts/module/admin/dataset.js"></script>
{% endblock %}