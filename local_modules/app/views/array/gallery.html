{% extends "../shared/shared_layout.html" %}

{% block headSuffix %}
    <title>Arrays - Create</title>
    
    
{% endblock %}

{% block bodyWrapper %}
    <body class="array array-show">
        <div id="page" class="site">
            {% include "../partials/header_bar_array.html" %}
            {% include "../partials/sidebar_filter.html" %}

            <div id="content" class="site-content">

                <nav id="sort-bar" class="sort-bar" role="navigation">

                    <div class="dropdown sort-control">
                        <a class="btn btn-default dropdown-toggle" type="button" id="sort-by" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Sort By: <span class="sort-criteria">Object Title</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="sort-by">
                            <li><a href="#">Object Title</a></li>
                            <li><a href="#">Acquisition Date</a></li>
                            <li><a href="#">Completion Date</a></li>
                            <li><a href="#">Artist Nationality</a></li>
                            <li><a href="#">Years in Collection</a></li>
                        </ul>
                    </div>

                    <div class="dropdown sort-control">
                        <a class="btn btn-default dropdown-toggle" type="button" id="sort-direction" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Sort Direction: <span class="sort-criteria">Ascending</span>
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="sort-direction">
                            <li><a href="#">Ascending</a></li>
                            <li><a href="#">Descending</a></li>
                        </ul>
                    </div>
                </nav>

            {% if isFilterActive %}
                <div class="filter-bar">
                    <span class="filter-tag">{{ filterVal | safe }} <a href="{{ routePath_withoutFilter }}" class="close filter-tag-close">&times;</a></span>
                </div>
            {% endif %}

                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-12">

                            <div class="filter-count">
                                <span>{{ pageSize | comma }} of {{ nonpagedCount | comma }} Relevant Items</span>
                            </div>

                            <div class="gallery">
                                <ul class="gallery-grid">
                                    {% for doc in docs %}
                                    <li class="gallery-item">
                                        <a href="/array/{{ doc.srcDocPKey }}/{{ doc._id }}">
                                            <img src="{{ doc.rowParams[fieldKey_gridThumbImageURL] if hasThumbs and doc.rowParams[fieldKey_gridThumbImageURL] else "http://placehold.it/180x180" }}" class="gallery-image" />
                                            <div class="gallery-tooltip">
                                                <h2 class="gallery-title">{{ doc.rowParams[fieldKey_objectTitle] }}</h2>
                                            </div>
                                        </a>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div><!-- .gallery -->

                            {% set lastPage = numPages | int %}
                            {% set currentPage = onPageNum | int %}

                            {% set currentFilters = '' %}
                            {% set paginationPath = '/array/moma_artworks_csv-rev2/gallery/' %}
                            {% set showAlwaysFirstAndLast = true %}

                            {% if lastPage > 1 %}

                                {# the number of first and last pages to be displayed #}
                                {% set extremePagesLimit = 3 %}

                                {# the number of pages that are displayed around the active page #}
                                {% set nearbyPagesLimit = 2 %}

                                <nav class="gallery-pagination">
                                    <ul class="pagination">
                                        {% if currentPage > 1 %}
                                            <li>
                                                <a href="#" aria-label="Previous">
                                                    <span aria-hidden="true">&laquo;</span>
                                                </a>
                                            </li>

                                            {% for i in range(1, extremePagesLimit) -%}
                                                {% if ( i < currentPage - nearbyPagesLimit ) %}
                                                    <li><a href="#">{{ i }}</a></li>
                                                {% endif %}
                                            {%- endfor %}

                                            {% if extremePagesLimit + 1 < currentPage - nearbyPagesLimit %}
                                                <li><span>&hellip;</span></li>
                                            {% endif %}

                                            {% for i in range(currentPage-nearbyPagesLimit, currentPage) -%}
                                                {% if ( i > 0 ) %}
                                                    <li><a href="#">{{ i }}</a></li>
                                                {% endif %}
                                            {%- endfor %}
                                        {% elif showAlwaysFirstAndLast %}
                                            <li class="disabled">
                                                <a href="#" aria-label="Previous">
                                                    <span aria-hidden="true">&laquo;</span>
                                                </a>
                                            </li>
                                        {% endif %}

                                        <li><a href="#" class="active">{{ currentPage }}</a></li>

                                        {% if currentPage < lastPage %}
                                            {% for i in range(currentPage+1, currentPage + nearbyPagesLimit) -%}
                                                {% if ( i <= lastPage ) %}
                                                    <li><a href="#">{{ i }}</a></li>
                                                {% endif %}
                                            {%- endfor %}

                                            {% if  (lastPage - extremePagesLimit) > (currentPage + nearbyPagesLimit) %}
                                                <li><span>&hellip;</span></li>
                                            {% endif %}

                                            {% for i in range(lastPage - extremePagesLimit+1, lastPage) -%}
                                                {% if ( i > currentPage + nearbyPagesLimit ) %}
                                                    <li><a href="#">{{ i }}</a></li>
                                                {% endif %}
                                            {%- endfor %}

                                            <li>
                                                <a href="#" aria-label="Next">
                                                    <span aria-hidden="true">&raquo;</span>
                                                </a>
                                            </li>
                                        {% elif showAlwaysFirstAndLast %}
                                            <li class="disabled">
                                                <a href="#" aria-label="Next">
                                                    <span aria-hidden="true">&raquo;</span>
                                                </a>
                                            </li>
                                        {% endif %}
                                    </ul>
                                </nav>
                            {% endif %}

                        </div>
                    </div><!-- .row -->
                </div>

            </div><!-- #content -->
        </div><!-- #page -->

        <script src="https://code.jquery.com/jquery-2.2.2.min.js" integrity="sha256-36cp2Co+/62rEAAYHLmRCPIych47CvdM+uTBJwSzWjI=" crossorigin="anonymous"></script>
        
        <script type="text/javascript" src="/javascripts/lib/bootstrap/bootstrap.js"></script>
        <script type="text/javascript" src="/javascripts/main.js"></script>
    </body>
{% endblock %}